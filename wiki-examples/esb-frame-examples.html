<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="../css/esb.css">
		<link rel="stylesheet" href="../css/esb-documentation.css">
		<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="../dist/esb.min.js"></script>
		<script>
			// simple script to delay positioning of anchor elements
			if (window.location.hash) {
				setTimeout(function(){
					var targetId = window.location.hash.slice(1);
					var topOfTarget = document.getElementById(targetId).getBoundingClientRect().top;
					window.scrollTo(0, topOfTarget + document.body.scrollTop);
				}, 1000);
			}
		</script>
	</head>
	<body>
		<div class="esb-documentation-wrap">
			<h1>ESB Frame Examples</h1>
			<h2 id="default-example">Default Example</h2>
			<p>This is the simplest example</p>
			<pre>
				<code>
&lt;div data-esb-page-framer="http://example.com"&gt;&lt;/div&gt;
				</code>
			</pre>
			<div data-esb-page-framer="http://example.com"></div>

			<h2 id="responsive-example">Responsive Example</h2>
			<p>This is how to display the same page at multiple viewports to get a side-by-side responsive comparison.</p>
			<pre>
				<code>
&lt;div 	data-esb-page-framer=&quot;http://eightshapes.com&quot; 
	data-esb-viewport-width=&quot;320&quot; 
	data-esb-height=&quot;300&quot; 
	data-esb-scale=&quot;0.25&quot; 
	data-esb-title=&quot;iPhone&quot;&gt;&lt;/div&gt;

&lt;div 	data-esb-page-framer=&quot;http://eightshapes.com&quot; 
	data-esb-viewport-width=&quot;768&quot; 
	data-esb-height=&quot;300&quot; 
	data-esb-scale=&quot;0.25&quot; 
	data-esb-title=&quot;iPad&quot;&gt;&lt;/div&gt;

&lt;div 	data-esb-page-framer=&quot;http://eightshapes.com&quot; 
	data-esb-viewport-width=&quot;1600&quot; 
	data-esb-height=&quot;300&quot; 
	data-esb-scale=&quot;0.25&quot; 
	data-esb-title=&quot;Desktop&quot;&gt;&lt;/div&gt;
				</code>
			</pre>
			<div 	data-esb-page-framer="http://eightshapes.com" 
					data-esb-viewport-width="320" 
					data-esb-height="300" 
					data-esb-scale="0.25" 
					data-esb-title="iPhone"></div>
			
			<div 	data-esb-page-framer="http://eightshapes.com" 
					data-esb-viewport-width="768" 
					data-esb-height="300" 
					data-esb-scale="0.25" 
					data-esb-title="iPad"></div>
			
			<div 	data-esb-page-framer="http://eightshapes.com" 
					data-esb-viewport-width="1600" 
					data-esb-height="300" 
					data-esb-scale="0.25" 
					data-esb-title="Desktop"></div>

			<h2 id="gallery-example">Gallery Example, Unloads when not visible</h2>
			<p>This is how to display multiple pages side-by-side</p>
			<p>This is also an example of unloading the Framers when they're no longer viewable. This can be useful if a Framer contains video or other rendering-intensive content that you want to prevent when the Framer is not visible.</p>
			<pre>
				<code>
&lt;div 	data-esb-page-framer=&quot;framer_local_pages/local1.html&quot; 
	data-esb-scale=&quot;0.57&quot; 
	data-esb-overlay=&quot;false&quot; 
	data-esb-unload-when-not-visible=&quot;true&quot;&gt;&lt;/div&gt;
	
&lt;div 	data-esb-page-framer=&quot;framer_local_pages/local2.html&quot; 
	data-esb-scale=&quot;0.57&quot; 
	data-esb-overlay=&quot;false&quot;
	data-esb-unload-when-not-visible=&quot;true&quot;&gt;&lt;/div&gt;
				</code>
			</pre>
			<div 	data-esb-page-framer="framer_local_pages/local1.html" 
					data-esb-scale="0.57" 
					data-esb-overlay="false" 
					data-esb-unload-when-not-visible="true"></div>
			<div 	data-esb-page-framer="framer_local_pages/local2.html" 
					data-esb-scale="0.57" 
					data-esb-overlay="false"
					data-esb-unload-when-not-visible="true"></div>


			<h2 id="on-page-config-example">On Page Config Example</h2>
			<p>Use on page config to wrap certain viewers with options that you don't want to apply to other viewers</p>
			<pre>
				<code>
&lt;h4&gt;360px wide, hide dimensions annotation&lt;/h4&gt;
&lt;div data-esb-page-framer-config="" data-esb-dimensions="false" data-esb-width="360"&gt;
	&lt;div data-esb-page-framer="http://eightshapes.com"&gt;&lt;/div&gt;
	&lt;div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/responsive-grid-behaviors/"&gt;&lt;/div&gt;
	&lt;div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/maintaining-trust-in-coworking-settings/"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;h4&gt;200px wide&lt;/h4&gt;
	&lt;div data-esb-page-framer="http://eightshapes.com"&gt;&lt;/div&gt;
	&lt;div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/responsive-grid-behaviors/"&gt;&lt;/div&gt;
	&lt;div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/maintaining-trust-in-coworking-settings/"&gt;&lt;/div&gt;
&lt;/div&gt;
				</code>
			</pre>
			<h4>360px wide, hide dimensions annotation</h4>
			<div data-esb-page-framer-config="" data-esb-dimensions="false" data-esb-width="360">
				<div data-esb-page-framer="http://eightshapes.com"></div>
				<div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/responsive-grid-behaviors/"></div>
				<div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/maintaining-trust-in-coworking-settings/"></div>
			</div>

			<h4>200px wide</h4>
			<div data-esb-page-framer="http://eightshapes.com"></div>
			<div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/responsive-grid-behaviors/"></div>
			<div data-esb-page-framer="http://eightshapes.com/blog/2013/09/25/maintaining-trust-in-coworking-settings/"></div>

			<h2 id="api">Triggering loading and unloading of iFrames manually</h2>
			<p>There is an event-based API to control the loading and unloading of Frame iframes.</p>
			<ol>
				<li>Find the UUID of the Frame you want to load/unload</li>
				<li>Trigger a custom event on the <code>document</code> using that UUID to invoke the action</li>
			</ol>

			<pre>
				<code>
&lt;div class=&quot;wrapper-element&quot;&gt;
	&lt;div data-esb-page-framer=&quot;http://example.com&quot;&gt;&lt;/div&gt;
	&lt;a href=&quot;#link&quot; id=&quot;unload-iframe-link&quot; class=&quot;btn btn-danger&quot;&gt;Unload this Frame&lt;/a&gt;
	&lt;a href=&quot;#link&quot; id=&quot;load-iframe-link&quot; class=&quot;btn&quot;&gt;Load this Frame&lt;/a&gt;
&lt;/div&gt;	

&lt;!-- First Script Example, Javascript only, see jQuery Example below --&gt;
&lt;script&gt;
	var unload_link = document.getElementById('unload-iframe-link');
	var load_link = document.getElementById('load-iframe-link');

	unload_link.addEventListener('click', function(){
		// The Frame is a sibling of the links in this example
		// Iterate over the siblings until the Frame is found (contains a data-esb-uuid attribute)
		var el = this,
			uuid = false,
			siblings = Array.prototype.filter.call(el.parentNode.children, function(child){
		  		return child !== el;
			});


		Array.prototype.forEach.call(siblings, function(el, i){
			if (el.getAttribute('data-esb-uuid') !== null) {
				uuid = el.getAttribute('data-esb-uuid');
			}
		});

		// Once the uuid is found, dispatch a custom event called 'unload-esb-page-framer-[uuid]'
		if (uuid) {
			if (window.CustomEvent) {
			  var event = new CustomEvent('unload-esb-page-framer-' + uuid);
			} else {
			  var event = document.createEvent('CustomEvent');
			  event.initCustomEvent('unload-esb-page-framer-' + uuid, true, true);
			}

			document.dispatchEvent(event);
		}
	});

	load_link.addEventListener('click', function(){
		// The Frame is a sibling of the links in this example
		// Iterate over the siblings until the Frame is found (contains a data-esb-uuid attribute)
		var el = this,
			uuid = false,
			siblings = Array.prototype.filter.call(el.parentNode.children, function(child){
		  		return child !== el;
			});


		Array.prototype.forEach.call(siblings, function(el, i){
			if (el.getAttribute('data-esb-uuid') !== null) {
				uuid = el.getAttribute('data-esb-uuid');
			}
		});

		// Once the uuid is found, dispatch a custom event called 'unload-esb-page-framer-[uuid]'
		if (uuid) {
			if (window.CustomEvent) {
			  var event = new CustomEvent('load-esb-page-framer-' + uuid);
			} else {
			  var event = document.createEvent('CustomEvent');
			  event.initCustomEvent('load-esb-page-framer-' + uuid, true, true);
			}

			document.dispatchEvent(event);
		}
	});
&lt;/script&gt;	

&lt;!-- Second Script Example, jQuery, identical result to above example --&gt;
&lt;script&gt;
	$(document).ready(function(){
		$("#unload-iframe-link").on("click", function(){
			var uuid = $(this).siblings().filter("[data-esb-uuid]").attr("data-esb-uuid");
			$('body').trigger('unload-esb-page-framer-' + uuid);
		});

		$("#load-iframe-link").on("click", function(){
			var uuid = $(this).siblings().filter("[data-esb-uuid]").attr("data-esb-uuid");
			$(document).trigger('load-esb-page-framer-' + uuid);
		});
		
	});
&lt;/script&gt;				
				</code>
			</pre>

			<div class="wrapper-element">
				<div data-esb-page-framer="http://example.com"></div>
				<a href="#link" id="unload-iframe-link" class="btn btn-danger">Unload this Frame</a>
				<a href="#link" id="load-iframe-link" class="btn">Load this Frame</a>
			</div>
		
			<script>
				var unload_link = document.getElementById('unload-iframe-link');
				var load_link = document.getElementById('load-iframe-link');

				unload_link.addEventListener('click', function(){
					var el = this,
						uuid = false,
						siblings = Array.prototype.filter.call(el.parentNode.children, function(child){
					  		return child !== el;
						});


					Array.prototype.forEach.call(siblings, function(el, i){
						if (el.getAttribute('data-esb-uuid') !== null) {
							uuid = el.getAttribute('data-esb-uuid');
						}
					});

					if (uuid) {
						if (window.CustomEvent) {
						  var event = new CustomEvent('unload-esb-page-framer-' + uuid);
						} else {
						  var event = document.createEvent('CustomEvent');
						  event.initCustomEvent('unload-esb-page-framer-' + uuid, true, true);
						}

						document.dispatchEvent(event);
					}
				});

				load_link.addEventListener('click', function(){
					var el = this,
						uuid = false,
						siblings = Array.prototype.filter.call(el.parentNode.children, function(child){
					  		return child !== el;
						});


					Array.prototype.forEach.call(siblings, function(el, i){
						if (el.getAttribute('data-esb-uuid') !== null) {
							uuid = el.getAttribute('data-esb-uuid');
						}
					});

					if (uuid) {
						if (window.CustomEvent) {
						  var event = new CustomEvent('load-esb-page-framer-' + uuid);
						} else {
						  var event = document.createEvent('CustomEvent');
						  event.initCustomEvent('load-esb-page-framer-' + uuid, true, true);
						}

						document.dispatchEvent(event);
					}
				});
			</script>
		</div>
	</body>
</html>